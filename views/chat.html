    <div id="chat-container" style="width:100%; height:100%">
        <div style="padding:10px;text-align:left;">
            <div class="chat-win-header">
                <div style="float:left;font-size:12px;font-weight:bold;color:#555">
                    <span data-bind="text: lblheader"></span>
                </div>
                <div style="float:right" data-bind="visible: issession">
                    <button data-bind="click: sendfile" style="padding:0 10px;font-size:12px">Send File</button>
                </div>
                <div style="clear:both"></div>
            </div>
        </div>
        <div class="fill-area" style="padding:10px;flex:1">
            <div class="chat-fill-area chatitemswnd">
                <table cellspacing="0" cellpadding="0">
                    <tbody data-bind="foreach: chatitems">
                        <tr>
                            <td>
                                <div style="padding:6px 10px 0 0">
                                    <span data-bind="text: time"></span>
                                </div>
                            </td>
                            <td>
                                <div style="padding-top:6px">
                                    <span class="chat-item-sender" data-bind="text: sender, css: { isContactSender: sender != streembit.User.name }"></span>:
                                </div>
                            </td>
                            <td>
                                <div class="chat-item-msg no-max-width" data-bind="css: { myTextMessage: sender == streembit.User.name }">
                                    <span data-bind="text: text"></span>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="footer-chat-controls">
                <div>
                    <textarea id="txtChatCtrl" data-bind="value: chatmsg" style="width: 100% !important;height: 75px !important;margin: 0;resize: none;box-sizing: border-box;background-color: #fff;color: #000;font-size: 12px;"></textarea>
                </div>
                <div style="text-align:center;margin-top:5px">
                    <button data-bind="click: sendchat" style="padding:0 10px;font-size:12px"><span data-bind="text: btncaption"></span></button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="sendmsg-modal" tabindex="-1" role="dialog" aria-labelledby="sendmsg-label">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="sendmsg-label">Send off-line message</h4>
                </div>
                <div class="modal-body">
                    ...
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary">Send message</button>
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript">
        $(document).ready(function () {
            var chat_div = document.getElementById('chat-container');
            var contact = streembit.Session.uioptions.contact;
            var issession = streembit.Session.uioptions.issession;
            var vm = new streembit.vms.ChatViewModel(contact, issession);
            vm.init(function () {
                ko.applyBindings(vm, chat_div);
            });

            streembit.Session.curent_viewmodel = vm;

            $("#txtChatCtrl").keyup(function (e) {
                var code = e.which;
                if (code == 13) {
                    e.preventDefault();
                    var text = $.trim($("#txtChatCtrl").val());
                    if (text) {
                        vm.chatmsg(text);
                        vm.sendchat();
                    }
                }
            });
        });
    </script>

