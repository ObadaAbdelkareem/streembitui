<div>
    <div data-bind="foreach: cabinets">
        <div style="background-color:#f0f0f0;border-radius: 2px;border: 2px solid #ddd;margin-bottom:3px;color:#000">
            <div class="pull-left" style="padding:5px 0 5px 6px">
                <i class="fa fa-inbox fa-lg"></i>
            </div>
            <div class="pull-left" style="padding:6px 5px 5px 6px" data-bind="visible:iseditmode()== false">
                <span data-bind="text: name"></span>
            </div>
            <div class="pull-left" style="padding:3px 5px 5px 6px;color:#000" data-bind="visible:iseditmode">
                <div style="display:inline-block;padding-right:10px">
                    <input type="text" data-bind="value: name" style="width:200px;padding:5px 2px" />
                </div>
                <div style="display:inline-block">
                    <button type="button" class="btn btn-labeled btn-success" data-bind="click: save">
                        <span class="btn-label">
                            <i class="glyphicon glyphicon-ok"></i>
                        </span>
                        Save
                    </button>
                    <button type="button" class="btn btn-labeled btn-danger" data-bind="click: cancel_edit">
                        <span class="btn-label">
                            <i class="glyphicon glyphicon-remove"></i>
                        </span>
                        Cancel
                    </button> <!--<button data-bind="click:save">Save</button> <button data-bind="click:cancel_edit">Cancel</button>-->
                </div>                
            </div>
            <div class="btn-group display-inline pull-right text-align-left hidden-tablet" style="padding:6px 5px 5px 0">
                <button class="btn btn-xs btn-default" data-bind="click: edit_file_cabinet">
                    <i class="fa fa-pencil fa-lg"></i>
                </button>
                <button class="btn btn-xs btn-default" data-bind="click: $parent.add_drawer">
                    <i class="fa fa-plus-circle fa-lg"></i>
                </button>
            </div>
            <div style="clear:both"></div>
        </div>
        <div data-bind="visible:$parent.isadd_drawer" style="padding:5px 0 10px 0">
            <input type="text" data-bind="value: $parent.new_drawer_name" style="width:150px;padding-left:2px" placeholder="Enter drawer name ..." /> <button data-bind="click:$parent.complete_add">Add Drawer</button> <button data-bind="click:$parent.cancel_add">Cancel</button>
        </div>
        
        <!-- drawers -->
        <div data-bind="foreach: drawers" style="padding-left:20px">
            <div class="drawer-item">
                <div class="pull-left" style="padding:6px 0 0 6px">
                    <a href="" data-toggle="collapse" data-bind="click: $component.on_item_click, attr: { href: '#drawer_id_' + drawer_id }, visible:iseditmode()== false">
                        <i class="glyphicon glyphicon-chevron-right"></i>  <span data-bind="text: drawer_name"></span>
                    </a>
                </div>
                <div class="pull-left" style="padding:3px 5px 5px 6px;color:#000" data-bind="visible:iseditmode">
                    <!--<input type="text" data-bind="value: drawer_name" style="width:250px;padding-left:2px" /> <button data-bind="click:save_drawer">Save</button> <button data-bind="click:cancel_drawer_edit">Cancel</button>-->
                    <div style="display:inline-block;padding-right:10px">
                        <input type="text" data-bind="value: drawer_name" style="width:250px;padding:5px 2px" />
                    </div>
                    <div style="display:inline-block">
                        <button type="button" class="btn btn-labeled btn-success" data-bind="click: save_drawer">
                            <span class="btn-label">
                                <i class="glyphicon glyphicon-ok"></i>
                            </span>
                            Save
                        </button>
                        <button type="button" class="btn btn-labeled btn-danger" data-bind="click: cancel_drawer_edit">
                            <span class="btn-label">
                                <i class="glyphicon glyphicon-remove"></i>
                            </span>
                            Cancel
                        </button> <!--<button data-bind="click:save">Save</button> <button data-bind="click:cancel_edit">Cancel</button>-->
                    </div>                
                </div>
                <div class="btn-group display-inline pull-right text-align-left hidden-tablet" style="padding:6px 5px 5px 0">
                    <button class="btn btn-xs btn-default" data-bind="click: edit_drawer">
                        <i class="fa fa-pencil fa-lg"></i>
                    </button>
                    <button class="btn btn-xs btn-default" data-bind="click: add_text">
                        <i class="fa fa-font fa-lg"></i>
                    </button>
                    <button class="btn btn-xs btn-default" data-bind="click: add_file">
                        <i class="fa fa-file-text fa-lg"></i>
                    </button>
                    <button class="btn btn-xs btn-default" data-bind="click: $component.delete_drawer">
                        <i class="fa fa-minus-circle fa-lg"></i>
                    </button>
                </div>
                <div style="clear:both"></div>
            </div>            
            <div data-bind="template: { name: template }"></div>  
            <div data-bind="attr: { id: 'drawer_id_' + drawer_id }" class="collapse" style="margin-bottom:10px">
                <div data-bind="foreach: dataitems">
                    <div data-bind="template: {name: template}"></div>    
                    <div data-bind="template: {name: ndatemplate}">

                    </div>
                </div>
            </div>          
        </div>        
    </div>
</div>

<script type="text/html" id="assign-nda-template">
    <div  class="assign-nda">
        <div>
            <h4 style="font-weight:bold">Assign a Personal NDA</h4>
        </div>
        <div>
            <div>
                <label>Recipient</label>
            </div>            
            <input type="text" style="width:250px;padding:5px 2px" data-bind="event: { keyup: search }, value: ndarcptsearch, valueUpdate: 'afterkeyup'" list="clientlist" />
            <datalist id="clientlist" data-bind="foreach: clientlist">
                <option data-bind="value: $data.account"></option>
                <!--<option data-bind="value:$data" />-->
            </datalist>
        </div>
        <div style="margin-top:20px">
            <button type="button" class="btn btn-labeled btn-success" data-bind="click: assign_nda">
                <span class="btn-label">
                    <i class="glyphicon glyphicon-ok"></i>
                </span>
                Save
            </button>
            <button type="button" class="btn btn-labeled btn-danger" data-bind="click: cancel_share_item">
                <span class="btn-label">
                    <i class="glyphicon glyphicon-remove"></i>
                </span>
                Cancel
            </button>
        </div>
    </div>    
</script>

<script type="text/html" id="add-text-template">
    <div class="add-drawer-item">
        <div style="font-weight:bold">Add text</div>
        <div data-bind="visible: is_title_error"></div>
        <div style="border-bottom:1px solid #ccc;padding-bottom:5px;margin-bottom:5px">
            <div><label>Title</label></div>            
            <em class="invalid error-label" style="margin-top:0;line-height:11px;margin-bottom:6px" data-bind="visible: is_title_error">This field is required.</em>
            <input type="text" style="width:250px" data-bind="value: new_data_title"/>
        </div>
        <div>
            <div><label>Data content</label></div>            
            <em class="invalid error-label" data-bind="visible: is_data_error">This field is required.</em>
            <textarea class="form-control" name="textitem" rows="10" data-bind="value: new_data_item" style="padding:2px"></textarea>
        </div>        
        <div style="margin-top:8px">
            <button type="button" class="btn btn-labeled btn-success"  data-bind="click: complete_add_text">
                <span class="btn-label">
                    <i class="glyphicon glyphicon-ok"></i>
                </span>
                Save
            </button>
            <button type="button" class="btn btn-labeled btn-danger" data-bind="click: cancel_add_dataitem">
                <span class="btn-label">
                    <i class="glyphicon glyphicon-remove"></i>
                </span>
                Cancel
            </button>
        </div>
    </div>    
</script>

<script type="text/html" id="add-file-template">
    <div class="add-drawer-item">
        <div style="font-weight:bold">Add file</div>
        <div style="border-bottom:1px solid #ccc;padding-bottom:5px;margin-bottom:5px">
            <div><label>Title</label></div>
            <em class="invalid error-label" style="margin-top:0;line-height:11px;margin-bottom:6px" data-bind="visible: is_title_error">Title is required.</em>
            <input type="text" style="width:250px" data-bind="value: new_data_title" />
        </div>
        <div style="border-bottom:1px solid #ccc;padding-bottom:5px;margin-bottom:5px">
            <em class="invalid error-label" style="margin-top:0;line-height:11px;margin-bottom:6px" data-bind="visible: is_file_error">File is required.</em>
            <input type="file" style="width:250px" data-bind="event: { change: function() { on_file_change($element.files[0]) } }" />
        </div>
        <div data-bind="visible: file_selected">
            <table class="drawer-item-table">
                <tr>
                    <td>File name: </td>
                    <td><span data-bind="text: newfile_name"></span></td>
                </tr>
                <tr>
                    <td>File path: </td>
                    <td><span data-bind="text: newfile_path"></span></td>
                </tr>
                <tr>
                    <td>File type: </td>
                    <td><span data-bind="text: newfile_type"></span></td>
                </tr>
                <tr>
                    <td>File size: </td>
                    <td><span data-bind="text: newfile_size_text"></span></td>
                </tr>
            </table>
        </div>        
        <div style="margin-top:8px">
            <button type="button" class="btn btn-labeled btn-success" data-bind="click: complete_add_file">
                <span class="btn-label">
                    <i class="glyphicon glyphicon-ok"></i>
                </span>
                Save
            </button>
            <button type="button" class="btn btn-labeled btn-danger" data-bind="click: cancel_add_dataitem">
                <span class="btn-label">
                    <i class="glyphicon glyphicon-remove"></i>
                </span>
                Cancel
            </button>
        </div>
    </div>
</script>

<script type="text/html" id="text-item-template">
    <div class="drawer-data-item" data-bind="visible: iseditmode() == false">
        <div class="drawer-item-header">
            <div class="pull-left">
                <span data-bind="text: client_data_title"></span>
            </div>
            <div class="pull-right">
                <div class="btn-group display-inline" style="padding:0">
                    <button class="btn btn-xs btn-default" data-bind="click: share_item">
                        <i class="fa fa-user fa-lg"></i>
                    </button>
                    <button class="btn btn-xs btn-default" data-bind="click: edit_item">
                        <i class="fa fa-pencil fa-lg"></i>
                    </button>
                    <button class="btn btn-xs btn-default" data-bind="click: function(){ $parent.delete_item($data, $parent); }">
                        <i class="fa fa-times-circle fa-lg"></i>
                    </button>
                </div>
            </div>
            <div class="clearfix"></div>
        </div>
        <div class="drawer-item-text">
            <span data-bind="text: client_data_text"></span>
        </div>
    </div>
    <div class="drawer-item-edit" data-bind="visible: iseditmode">
        <div style="margin-bottom:10px;padding:8px;background:#f0f0f0;border:1px solid #ccc;border-radius:3px">
            <div style="font-weight:bold">Edit text item</div>
            <div data-bind="visible: is_title_error"></div>
            <div style="border-bottom:1px solid #ccc;padding-bottom:5px;margin-bottom:5px">
                <div><label>Data title</label></div>
                <em class="invalid error-label" style="margin-top:0;line-height:11px;margin-bottom:6px" data-bind="visible: is_title_error">This field is required.</em>
                <input type="text" style="width:250px;padding:2px" data-bind="value: client_data_title" />
            </div>
            <div>
                <div><label>Data content</label></div>
                <em class="invalid error-label" data-bind="visible: is_data_error">This field is required.</em>
                <textarea class="form-control" name="textitem" rows="10" data-bind="value: client_data_text" style="padding: 2px"></textarea>
            </div>
            <div style="margin-top:8px">
                <button type="button" class="btn btn-labeled btn-success" data-bind="click: save_item">
                    <span class="btn-label">
                        <i class="glyphicon glyphicon-ok"></i>
                    </span>
                    Save
                </button>
                <button type="button" class="btn btn-labeled btn-danger" data-bind="click: cancel_edit">
                    <span class="btn-label">
                        <i class="glyphicon glyphicon-remove"></i>
                    </span>
                    Cancel
                </button>
            </div>
        </div>
    </div>
</script>

<script type="text/html" id="file-item-template">
    <div class="drawer-data-item" data-bind="visible: iseditmode() == false">
        <div class="drawer-item-header">
            <div class="pull-left">
                <span data-bind="text: client_data_title"></span>
            </div>
            <div class="pull-right">
                <div class="btn-group display-inline" style="padding:0">
                    <button class="btn btn-xs btn-default" data-bind="click: share_item">
                        <i class="fa fa-user fa-lg"></i>
                    </button>
                    <button class="btn btn-xs btn-default" data-bind="click: function(){ $parent.delete_item($data, $parent); }">
                        <i class="fa fa-times-circle fa-lg"></i>
                    </button>
                </div>
            </div>
            <div class="clearfix"></div>
        </div>
        <div>
            <table class="drawer-item-table">
                <tr>
                    <td>File name: </td>
                    <td><span data-bind="text: client_data_item.name"></span></td>
                </tr>
                <tr>
                    <td>File type: </td>
                    <td><span data-bind="text: client_data_item.type"></span></td>
                </tr>
                <tr>
                    <td>File size: </td>
                    <td><span data-bind="text: filesize"></span></td>
                </tr>
            </table>
        </div>
        <div style="padding:20px 0 10px 10px">
            <button type="button" class="btn btn-labeled btn-success" data-bind="click: download_file">
                <span class="btn-label">
                    <i class="glyphicon glyphicon-cloud-download"></i>
                </span>
                Download
            </button>
        </div>
    </div>
    
</script>


