<div id="media-call-container">
    <div class="media-call-center">
        <div class="media-call-header">
            <div style="float:left;" class="callbuttons">
                <div style="display:inline-block;margin:0;padding:0;float:left">
                    <div style="margin-top:10px">
                        <span class="fa-stack awesomeRed" title="Hang Up" data-bind="click: hangup">
                            <img src="../lib/images/hangup.png" width="40px" style="color: #a90329;cursor: pointer;">
                        </span>
                        <span class="fa-stack awesomeBlue" title="Send file" data-bind="click: sendfile">
                            <i class="fa fa-file fa-stack-2x awesomeEntity" />
                        </span>
                        <span class="fa-stack awesomeBlue smallScrChatBtn" title="Chat" data-bind="click: showchat">
                            <i class="fa fa-commenting fa-stack-2x awesomeEntity" />
                        </span>
                    </div>
                </div>
                <div style="display:inline-block;margin:0;padding:0;float:left">
                    <div style="margin-top:10px">
                        <span class="fa-stack awesomeBlue" title="Mute Audio" data-bind="click: remove_audio, visible: isaudio">
                            <i class="fa fa-microphone fa-stack-2x awesomeEntity" />
                            <i class="fa fa-minus-circle fa-stack-1x awesomeAction removebtn" />
                        </span>
                        <span class="fa-stack awesomeBlue" title="Add audio" data-bind="click: add_audio, visible: isaudio() == false">
                            <i class="fa fa-microphone fa-stack-2x awesomeEntity" />
                            <i class="fa fa-plus-circle fa-stack-1x awesomeAction addbtn" />
                        </span>
                    </div>
                </div>
                <div style="clear:both"></div>
            </div>
            <!-- <div style="float:right;font-weight:bold;font-size:12px;padding-right:20px;padding-top:14px" class="calltime_parent">
                <div data-bind="attr: { 'data-calltime': contact.pkeyhash }">
                    Call with <span data-bind="text: contact_name"></span>&nbsp;&nbsp;&nbsp;<span></span>
                </div>
            </div> -->
            <div class="add-audio-call">
                <button class="btn btn-default btn-invite inviteCont" data-bind="click: show_invite" style="border:1px solid #EAF5F3">
                    <i class="fa fa-user-plus" style="color:#366297"></i>
                </button>
                <div data-bind="foreach: contacts, visible: showInvite">
                    <button class="btn btn-default" data-bind="click: $parent.invite.bind($parent), text: name, attr: { 'data-invite': pkeyhash }"></button>
                </div>
            </div>
        
            <div style="clear:both"></div>
            
            <span class="chat-name-during-audiocall" style="display: none;font-size:12px;font-weight: bold;color:#555;position: relative;top: 13px">
                Chat with <span data-bind="text: contact_name"></span>
            </span>
            <div style="display: none;text-align: right;float: right;position: relative;top:0px" class="save-rm-chat-audio">
                <div class="btn-group">
                    <button class="btn btn-primary" data-bind="click: savechat" style="padding:0 10px;font-size:12px">Save Chat History</button>
                    <button class="btn btn-danger" data-bind="click: rmchat" style="padding:0 10px;font-size:12px">Delete Chat History</button>
                </div>
                <button class="btn btn-info" data-bind="click: sendfile" style="padding:0 10px;font-size:12px">Send File</button>
            </div>

                <div class="add-all-contacts-field" data-bind="visible: show_contact_invite">
                    <div class="add-group-header-with-closebtn">
                        <div class="add-group-header">
                            <span>Add to Group</span>
                            <button type="button" class="close close-add-group" data-bind="click: close_add_group">&times;</button>
                        </div>
                    </div>
                    <div data-bind="foreach: contacts" class="all-contacts-part">
                        <div class="for-add-group-call" style="width: 370px;margin: 4px auto">
                            <div class="list-group-item contact-bar-list-item adding-contact-to-groupcall">
                                <div style="float:left;">
                                    <span data-bind="text: name" class="mar-no text-main" style="color: #474544;font-weight: bold;"></span>
                                </div>
                                <div style="clear:both"></div>
                            </div>
                        </div>
                    </div>
                </div>
            
        </div>

        <div class="media-call-content" style="flex-direction: column">
            <div class="chat_items" style="display:none;flex: 1">
                <div id="text-chat-area" style="flex:1">
                    <div class="fill-area" style="padding:10px;flex:1">
                        <div class="chat-fill-area chatitemswnd chat-audio">
                            <table cellspacing="0" cellpadding="0">
                                <tbody data-bind="foreach: chatitems">
                                    <tr>
                                        <td>
                                            <div style="padding:6px 10px 0 0">
                                                <span data-bind="text: time"></span>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="chat-sender" style="padding-top:6px">
                                                <img src="/lib/img/me.png" width="32" height="32" data-bind="visible: $parent.isMe(sender)" />
                                                <img src="/lib/img/ava_placeholder.png" width="32" height="32" data-bind="visible: $parent.isContactNoAva(sender)" />
                                                <img width="32" height="32" data-bind="visible: $parent.isContactWithAva(sender), attr: {src: $parent.contact_avatar}" />
                                                <span class="chat-item-sender" data-bind="text: sender, css: { isContactSender: sender != $parent.contact_name() }"></span>:
                                            </div>
                                        </td>
                                        <td>
                                            <div class="chat-item-msg" data-bind="css: { myTextMessage: sender == $parent.contact_name() }">
                                                <span data-bind="html: text"></span>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="footer-chat-controls">
                            <div id="chat_img_during_audio_call" data-bind="click: chatimage">
                                <img src="/lib/img/chat-img-icon.png" width="20" height="20" alt="">
                            </div>
                            <div>
                                <textarea id="txtChatCtrl" data-bind="value: chatmsg, event: {input: typing}" style="width: 100% !important;height: 75px;margin: 0;resize: none;box-sizing: border-box;background-color: #fff;color: #000;font-size: 12px;"></textarea>
                                <div class="contact-is-typing-container">
                                    <span class="contact-is-typing" data-bind="text: contact_is_typing"></span>
                                </div>
                            </div>

                            <div style="text-align:center;margin-top:5px">
                                <button class="btn btn-primary" data-bind="click: sendchat" style="padding:0 10px;font-size:12px">Send Message</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script type="text/html" id="send-file-template">
        <div id="filesend-dlg-container" style="width:450px;padding-bottom:5px;margin:0 auto 10px auto;text-align:left">
            <div style="width:450px" data-bind="visible: isinprogress() == false">
                <input type="file" id="fileInput" name="files" data-bind="event: { change: function() { send_file($element.files[0]) } }" />
            </div>
            <div style="width:450px;margin-top:10px;display:none" data-bind="visible: isinprogress">
                <div style="font-size:12px;color:#666">Send progress: </div>
                <div>
                    <progress id="fileProgress" value="0" max="100" style="width:400px"></progress>
                </div>
            </div>
        </div>
    </script>
</div>
